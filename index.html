<!DOCTYPE html><html lang="en" class="no-js"><head>
    

<meta name="robots" content="nofollow">


      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://lhuan111.github.io/">
      
      
      
        <link rel="next" href="Project%20Assignment%202/">
      
      
      <link rel="icon" href="static/FRlogo2.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.18">
            

        

    
      
        <title>RAS557 Foldable Robotics Project Website</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    


  <link href="assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ras557-project-assignment-1-klann-style-hexapod" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="RAS557 Foldable Robotics Project Website" class="md-header__button md-logo" aria-label="RAS557 Foldable Robotics Project Website" data-md-component="logo">
      
  <img src="static/FRlogo2.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RAS557 Foldable Robotics Project Website
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://lhuan111.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
  </div>
  <div class="md-source__repository">
    Lhuan111
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="Project%20Assignment%202/" class="md-tabs__link">
        
  
    
  
  Project Assignment 2

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="charts/" class="md-tabs__link">
        
  
    
  
  Charts

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="esp-32-table/" class="md-tabs__link">
        
  
    
  
  ESP32 Table

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="pic-table/" class="md-tabs__link">
        
  
    
  
  PIC Table

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="component-selection-example/" class="md-tabs__link">
          
  
    
  
  Component selection example

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="static/node_modules/mathjax/" class="md-tabs__link">
          
  
    
  
  Static

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="subfolder/" class="md-tabs__link">
          
  
    
  
  Subfolder

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="RAS557 Foldable Robotics Project Website" class="md-nav__button md-logo" aria-label="RAS557 Foldable Robotics Project Website" data-md-component="logo">
      
  <img src="static/FRlogo2.png" alt="logo">

    </a>
    RAS557 Foldable Robotics Project Website
  </label>
  
    <div class="md-nav__source">
      <a href="https://lhuan111.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
  </div>
  <div class="md-source__repository">
    Lhuan111
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Home
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-project-goal-fit" class="md-nav__link">
    <span class="md-ellipsis">
      1 ‚Äî Project Goal &amp; Fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-background-research" class="md-nav__link">
    <span class="md-ellipsis">
      2 ‚Äî Background Research
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 ‚Äî Background Research">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#figures-and-observations" class="md-nav__link">
    <span class="md-ellipsis">
      Figures and Observations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-video" class="md-nav__link">
    <span class="md-ellipsis">
      Project Video:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-specifications-table" class="md-nav__link">
    <span class="md-ellipsis">
      3 ‚Äî Specifications Table
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 ‚Äî Specifications Table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#answer" class="md-nav__link">
    <span class="md-ellipsis">
      Answer:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-mechanism-design-kinematic-model" class="md-nav__link">
    <span class="md-ellipsis">
      4 ‚Äî Mechanism Design &amp; Kinematic Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 ‚Äî Mechanism Design &amp; Kinematic Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mechanism-description" class="md-nav__link">
    <span class="md-ellipsis">
      Mechanism Description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mechanism-drawing" class="md-nav__link">
    <span class="md-ellipsis">
      Mechanism Drawing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-force-torque-power-estimation" class="md-nav__link">
    <span class="md-ellipsis">
      5 ‚Äî Force / Torque / Power Estimation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-plots-figures" class="md-nav__link">
    <span class="md-ellipsis">
      6 ‚Äî Plots &amp; Figures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 ‚Äî Plots &amp; Figures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#version-2-explanation" class="md-nav__link">
    <span class="md-ellipsis">
      Version 2 Explanation:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motor-torque-calculation-and-sizing" class="md-nav__link">
    <span class="md-ellipsis">
      Motor Torque Calculation and Sizing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motor-torque-accounting-for-gearbox-and-efficiency" class="md-nav__link">
    <span class="md-ellipsis">
      Motor torque accounting for gearbox and efficiency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motor-speed-electrical-power" class="md-nav__link">
    <span class="md-ellipsis">
      Motor Speed &amp; Electrical Power
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worked-numeric-example" class="md-nav__link">
    <span class="md-ellipsis">
      Worked Numeric Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-discussion-points" class="md-nav__link">
    <span class="md-ellipsis">
      7 ‚Äî Discussion Points
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 ‚Äî Discussion Points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-degrees-of-freedom-and-number-of-motors" class="md-nav__link">
    <span class="md-ellipsis">
      7.1. Degrees of Freedom and Number of Motors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-how-end-effector-forces-were-estimated" class="md-nav__link">
    <span class="md-ellipsis">
      7.2. How End-Effector Forces Were Estimated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-how-end-effector-speeds-were-estimated" class="md-nav__link">
    <span class="md-ellipsis">
      7.3. How End-Effector Speeds Were Estimated
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-files" class="md-nav__link">
    <span class="md-ellipsis">
      Project Files:
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Project%20Assignment%202/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Assignment 2
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="charts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Charts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="esp-32-table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ESP32 Table
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="pic-table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PIC Table
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="component-selection-example/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Component selection example
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    
  
  
    <a href="static/node_modules/mathjax/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Static
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="subfolder/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Subfolder
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-project-goal-fit" class="md-nav__link">
    <span class="md-ellipsis">
      1 ‚Äî Project Goal &amp; Fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-background-research" class="md-nav__link">
    <span class="md-ellipsis">
      2 ‚Äî Background Research
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 ‚Äî Background Research">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#figures-and-observations" class="md-nav__link">
    <span class="md-ellipsis">
      Figures and Observations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-video" class="md-nav__link">
    <span class="md-ellipsis">
      Project Video:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-specifications-table" class="md-nav__link">
    <span class="md-ellipsis">
      3 ‚Äî Specifications Table
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 ‚Äî Specifications Table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#answer" class="md-nav__link">
    <span class="md-ellipsis">
      Answer:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-mechanism-design-kinematic-model" class="md-nav__link">
    <span class="md-ellipsis">
      4 ‚Äî Mechanism Design &amp; Kinematic Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 ‚Äî Mechanism Design &amp; Kinematic Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mechanism-description" class="md-nav__link">
    <span class="md-ellipsis">
      Mechanism Description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mechanism-drawing" class="md-nav__link">
    <span class="md-ellipsis">
      Mechanism Drawing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-force-torque-power-estimation" class="md-nav__link">
    <span class="md-ellipsis">
      5 ‚Äî Force / Torque / Power Estimation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-plots-figures" class="md-nav__link">
    <span class="md-ellipsis">
      6 ‚Äî Plots &amp; Figures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 ‚Äî Plots &amp; Figures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#version-2-explanation" class="md-nav__link">
    <span class="md-ellipsis">
      Version 2 Explanation:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motor-torque-calculation-and-sizing" class="md-nav__link">
    <span class="md-ellipsis">
      Motor Torque Calculation and Sizing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motor-torque-accounting-for-gearbox-and-efficiency" class="md-nav__link">
    <span class="md-ellipsis">
      Motor torque accounting for gearbox and efficiency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motor-speed-electrical-power" class="md-nav__link">
    <span class="md-ellipsis">
      Motor Speed &amp; Electrical Power
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worked-numeric-example" class="md-nav__link">
    <span class="md-ellipsis">
      Worked Numeric Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-discussion-points" class="md-nav__link">
    <span class="md-ellipsis">
      7 ‚Äî Discussion Points
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 ‚Äî Discussion Points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-degrees-of-freedom-and-number-of-motors" class="md-nav__link">
    <span class="md-ellipsis">
      7.1. Degrees of Freedom and Number of Motors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-how-end-effector-forces-were-estimated" class="md-nav__link">
    <span class="md-ellipsis">
      7.2. How End-Effector Forces Were Estimated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-how-end-effector-speeds-were-estimated" class="md-nav__link">
    <span class="md-ellipsis">
      7.3. How End-Effector Speeds Were Estimated
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-files" class="md-nav__link">
    <span class="md-ellipsis">
      Project Files:
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://lhuan111.github.io/edit/main/docs/index.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"></path></svg>
    </a>
  
  


<hr>
<p>title: <strong>Project Assignment 1</strong>
tags:
- foldable robotics
- walking robots</p>
<hr>
<h1 id="ras557-project-assignment-1-klann-style-hexapod">RAS557 Project Assignment 1 ‚Äî Klann-style Hexapod</h1>
<p><strong>Instructor: Daniel Aukes</strong></p>
<p><strong>Team members: Shuai Guo, Lixiao Huang, Yibo Yuan</strong></p>
<p>Contents:
- Klann linkage kinematics for a single leg (numeric closed-loop solver)
- A hexapod arrangement (6 legs) with phase offsets
- Numeric Jacobian (d foot position / d crank angle), torque and power computations
- An MJCF generator for MuJoCo (approximate multi-body representation)</p>
<h2 id="1-project-goal-fit">1 ‚Äî Project Goal &amp; Fit</h2>
<p><strong>Team goal:</strong></p>
<p>Our team‚Äôs goal is to design, model, and analyze a Klann-style six-legged walking robot that demonstrates efficient ground locomotion using purely mechanical linkages and minimal actuation. The project aims to replicate bio-inspired gait patterns from hexapodal insects while integrating foldable fabrication techniques for lightweight and easily manufacturable components. The design will be simulated in MuJoCo and analyzed for torque, power, and stability requirements.</p>
<p><strong>Candidate organism:</strong> Species name, body plan, motion of interest</p>
<ul>
<li>Organism: Blaberus giganteus (giant cockroach)</li>
<li>Body Plan: Hexapodal (six-legged), each leg with two primary rotational joints for swing and lift phases</li>
<li>Motion of Interest: Tripod gait used for steady walking and efficient terrestrial locomotion on uneven ground</li>
</ul>
<p><strong>Scope / Impact / Team fit / Topic fit</strong></p>
<ul>
<li>Scope: how you constrain the problem for a single semester</li>
</ul>
<p>To ensure the project is feasible within a single semester, we constrain the design to a planar six-bar Klann linkage per leg, with a single degree of freedom driven by a rotating crank. This limits control complexity while preserving the biologically inspired foot trajectory that mimics insect gaits. The robot will be modeled at tabletop scale (roughly 20‚Äì25 cm body length), built from folded cardboard or laser-cut polymer, and powered by six independent crank motors. The scope emphasizes kinematics and mechanical efficiency over autonomous control or perception.</p>
<ul>
<li>Impact: why this matters.</li>
</ul>
<p>This project demonstrates how bio-inspired mechanical linkages can produce complex legged locomotion with minimal sensors or software. It contributes to foldable robotics by showing that low-cost, flat-fabricated mechanisms can achieve reliable walking behaviors comparable to multi-motor leg designs. The research has practical implications for low-cost search-and-rescue scouting robots, STEM education, and deployable field robots where simplicity, weight, and robustness are critical. Understanding this linkage‚Äôs performance also deepens insight into energy-efficient legged motion relevant to both engineered and biological systems.</p>
<ul>
<li>Team Fit: why your team is suited to this problem.</li>
</ul>
<p>Our team brings together complementary skills in mechanical design, kinematics, and simulation. One member specializes in mechanism synthesis and CAD modeling, another in physics-based simulation and code development (MuJoCo/Python), and another in fabrication and testing of foldable prototypes. This diverse expertise allows us to connect theoretical modeling with hands-on prototyping and validation, ensuring both analytical rigor and functional design execution.</p>
<ul>
<li>Topic Fit: how this uses foldable robotics techniques</li>
</ul>
<p>The project directly employs foldable robotics techniques introduced in class, using layered cardboard or plastic sheets with integrated hinge lines to create planar four- and six-bar linkages. The Klann mechanism‚Äôs planar structure is ideally suited for this fabrication method, allowing rapid iteration of designs without costly machining. By combining foldable joints with bio-inspired geometry, we can explore how planar foldable mechanisms achieve lifelike motion while remaining lightweight, scalable, and manufacturable using classroom tools.</p>
<h2 id="2-background-research">2 ‚Äî Background Research</h2>
<p><strong>Search Terms</strong>
To inform our design, we conducted literature searches using the following keywords:</p>
<ul>
<li><code>cockroach biomechanics ground reaction forces</code></li>
<li><code>hexapod gait tripod gait kinematics</code></li>
<li><code>Klann linkage walking mechanism</code></li>
<li><code>insect leg morphology hexapod locomotion</code></li>
<li><code>bio-inspired mechanical leg robots</code></li>
<li><code>foldable planar linkage mechanism</code></li>
</ul>
<p>These searches yielded studies on both <strong>biological hexapods</strong> (e.g., <em>Blaberus giganteus</em>) and <strong>mechanical walkers</strong> like the <strong>Klann linkage</strong>, which replicates insect-style foot trajectories using a planar six-bar mechanism.</p>
<p><strong>Representative Citations (IEEE Format)</strong></p>
<p>[1] R. J. Full and D. E. Koditschek, ‚ÄúTemplates and anchors: Neuromechanical hypotheses of legged locomotion on land,‚Äù <em>Journal of Experimental Biology</em>, vol. 202, no. 23, pp. 3325‚Äì3332, 1999.<br>
[2] K. Klann, ‚ÄúMechanical leg walking device,‚Äù <em>U.S. Patent 5,281,151</em>, Jan. 25, 1994.<br>
[3] T. McGeer, ‚ÄúPassive dynamic walking,‚Äù <em>The International Journal of Robotics Research</em>, vol. 9, no. 2, pp. 62‚Äì82, 1990.<br>
[4] S. Kim, C. Laschi, and B. Trimmer, ‚ÄúSoft robotics: A bioinspired evolution in robotics,‚Äù <em>Trends in Biotechnology</em>, vol. 31, no. 5, pp. 287‚Äì294, 2013.<br>
[5] Schilling, M., Schneider, A., Cruse, H., &amp; Schmitz, J. (2008, September). Local control mechanisms in six-legged walking. In 2008 IEEE/RSJ International Conference on Intelligent Robots and Systems (pp. 2655-2660). IEEE.</p>
<p>** Key Biological and Mechanical Insights**</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align: center;">Unit</th>
<th style="text-align: right;">Value / Observation</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr>
<td>Typical insect mass (scaled equivalent)</td>
<td style="text-align: center;">kg</td>
<td style="text-align: right;">0.5‚Äì1.0</td>
<td>[1]</td>
</tr>
<tr>
<td>Walking speed (tripod gait)</td>
<td style="text-align: center;">m/s</td>
<td style="text-align: right;">0.2‚Äì0.5</td>
<td>[1]</td>
</tr>
<tr>
<td>Stride length (scaled)</td>
<td style="text-align: center;">m</td>
<td style="text-align: right;">0.08‚Äì0.12</td>
<td>[1]</td>
</tr>
<tr>
<td>Peak ground reaction force per stance leg</td>
<td style="text-align: center;">N</td>
<td style="text-align: right;">~4</td>
<td>[1]</td>
</tr>
<tr>
<td>Material for mechanical analog</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">Plywood / laser-cut plastic / cardboard</td>
<td>‚Äî</td>
</tr>
<tr>
<td>Mechanism inspiration</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">Klann six-bar linkage</td>
<td>[2]</td>
</tr>
<tr>
<td>Actuation</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">Servo motors or geared DC motors</td>
<td>‚Äî</td>
</tr>
<tr>
<td>Power source</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">Compact 6V‚Äì12V battery</td>
<td>‚Äî</td>
</tr>
</tbody>
</table>
<h3 id="figures-and-observations">Figures and Observations</h3>
<p><strong>Figure 1.</strong> <em>Klann-style six-legged mechanical walker prototype built for this project.</em><br>
Each leg consists of a planar six-bar linkage, driven by a single rotating crank. The leg replicates the ground contact and swing phases of a cockroach-like tripod gait. The body is lightweight plywood with foldable linkage connections, and spherical red feet enhance stability and traction. Pictures below show the front, back, and side views.</p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="klann_front.jpg" data-desc-position="bottom"><img src="klann_front.jpg" width="600"></a>
<a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="klann_back.jpg" data-desc-position="bottom"><img src="klann_back.jpg" width="600"></a>
<a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="klann_side.jpg" data-desc-position="bottom"><img src="klann_side.jpg" width="600"></a></p>
<h2 id="project-video">Project Video:</h2>
<p>This video shows the robot walking in the real world. </p>
<p><iframe width="640" height="480" src="https://www.youtube.com/embed/b33vg-D-HBs" title="Klann-Style Six Leg Robot" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</p>
<h2 id="3-specifications-table">3 ‚Äî Specifications Table</h2>
<h3 id="answer"><strong>Answer:</strong></h3>
<p>The table below lists key physical and kinematic parameters for the <strong>Klann-style six-legged walker</strong>.<br>
All quantities are expressed in <strong>SI units</strong>, with values derived from literature on insect locomotion and scaled for the tabletop prototype.</p>
<table>
<thead>
<tr>
<th><strong>Parameter</strong></th>
<th style="text-align: center;"><strong>Symbol</strong></th>
<th style="text-align: center;"><strong>Unit</strong></th>
<th style="text-align: right;"><strong>Value (example)</strong></th>
<th><strong>Source / Notes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Total robot mass</td>
<td style="text-align: center;">ùëö</td>
<td style="text-align: center;">kg</td>
<td style="text-align: right;">0.8</td>
<td>Measured prototype (plywood + servos)</td>
</tr>
<tr>
<td>Number of legs</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">6</td>
<td>Hexapod (tripod gait)</td>
</tr>
<tr>
<td>Leg mechanism type</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">Klann 6-bar linkage</td>
<td>Planar, single DOF per leg</td>
</tr>
<tr>
<td>Crank length</td>
<td style="text-align: center;">ùêø‚ÇÅ</td>
<td style="text-align: center;">m</td>
<td style="text-align: right;">0.025</td>
<td>Measured</td>
</tr>
<tr>
<td>Coupler link 1</td>
<td style="text-align: center;">ùêø‚ÇÇ</td>
<td style="text-align: center;">m</td>
<td style="text-align: right;">0.060</td>
<td>Measured</td>
</tr>
<tr>
<td>Coupler link 2</td>
<td style="text-align: center;">ùêø‚ÇÉ</td>
<td style="text-align: center;">m</td>
<td style="text-align: right;">0.045</td>
<td>Measured</td>
</tr>
<tr>
<td>Rocker length</td>
<td style="text-align: center;">ùêø‚ÇÑ</td>
<td style="text-align: center;">m</td>
<td style="text-align: right;">0.065</td>
<td>Measured</td>
</tr>
<tr>
<td>Follower (leg) length</td>
<td style="text-align: center;">ùêø‚ÇÖ</td>
<td style="text-align: center;">m</td>
<td style="text-align: right;">0.090</td>
<td>Measured</td>
</tr>
<tr>
<td>Body length</td>
<td style="text-align: center;">ùêø_b</td>
<td style="text-align: center;">m</td>
<td style="text-align: right;">0.25</td>
<td>Approx. overall length</td>
</tr>
<tr>
<td>Walking speed (target)</td>
<td style="text-align: center;">ùë£</td>
<td style="text-align: center;">m/s</td>
<td style="text-align: right;">0.30</td>
<td>From cockroach gait scaling</td>
</tr>
<tr>
<td>Stride length</td>
<td style="text-align: center;">ùë†</td>
<td style="text-align: center;">m</td>
<td style="text-align: right;">0.10</td>
<td>Derived from mechanism geometry</td>
</tr>
<tr>
<td>Step frequency</td>
<td style="text-align: center;">ùëì</td>
<td style="text-align: center;">Hz</td>
<td style="text-align: right;">3</td>
<td>Typical tripod gait rhythm</td>
</tr>
<tr>
<td>Stance fraction</td>
<td style="text-align: center;">Œ≤</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">0.6</td>
<td>Fraction of stride in contact</td>
</tr>
<tr>
<td>Peak GRF per stance leg</td>
<td style="text-align: center;">ùêπ_leg</td>
<td style="text-align: center;">N</td>
<td style="text-align: right;">3.9</td>
<td><span class="arithmatex">\(1.5 \times (m g)/3\)</span></td>
</tr>
<tr>
<td>Crank angular velocity</td>
<td style="text-align: center;">œâ_c</td>
<td style="text-align: center;">rad/s</td>
<td style="text-align: right;">6.0</td>
<td>Derived from stride frequency</td>
</tr>
<tr>
<td>Peak crank torque</td>
<td style="text-align: center;">œÑ_c</td>
<td style="text-align: center;">N¬∑m</td>
<td style="text-align: right;">0.35</td>
<td>From Jacobian &amp; force mapping</td>
</tr>
<tr>
<td>Gear ratio</td>
<td style="text-align: center;">ùê∫</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">10</td>
<td>Motor gearbox ratio</td>
</tr>
<tr>
<td>Efficiency</td>
<td style="text-align: center;">Œ∑</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">0.7</td>
<td>Typical small gearbox efficiency</td>
</tr>
<tr>
<td>Safety margin</td>
<td style="text-align: center;">ùêå</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">2</td>
<td>For motor sizing</td>
</tr>
<tr>
<td>Rated motor torque</td>
<td style="text-align: center;">œÑ_m,rated</td>
<td style="text-align: center;">N¬∑m</td>
<td style="text-align: right;">0.10</td>
<td>$\frac{</td>
</tr>
<tr>
<td>Power per actuator</td>
<td style="text-align: center;">ùëÉ</td>
<td style="text-align: center;">W</td>
<td style="text-align: right;">0.7</td>
<td><span class="arithmatex">\( œÑ_c √ó œâ_c \)</span></td>
</tr>
<tr>
<td>Material</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">Plywood / 3D-printed polymer</td>
<td>Foldable planar structure</td>
</tr>
<tr>
<td>Actuators</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">Micro servos (6 total)</td>
<td>One per crankshaft</td>
</tr>
<tr>
<td>Power source</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: center;">‚Äî</td>
<td style="text-align: right;">2S Li-ion battery</td>
<td>7.4 V nominal</td>
</tr>
</tbody>
</table>
<h3 id="notes">Notes</h3>
<ul>
<li>The above values are representative of the prototype shown in Figures 1‚Äì2.  </li>
<li>Actual values may vary slightly depending on material density and linkage tolerances.  </li>
<li>Use the torque and power values in this table for actuator selection and MuJoCo simulation inputs.</li>
</ul>
<h2 id="4-mechanism-design-kinematic-model">4 ‚Äî Mechanism Design &amp; Kinematic Model</h2>
<h4 id="mechanism-description">Mechanism Description</h4>
<p>The <strong>Klann linkage</strong> is a planar six-bar mechanism designed to transform continuous rotary motion into an approximate leg-like walking trajectory.<br>
Each leg consists of:
- A fixed <strong>ground link</strong> connecting two pivots (A and B),
- A <strong>crank</strong> (driven by the motor),
- Two <strong>coupler links</strong> forming a four-bar subloop,
- A <strong>rocker</strong> connected to the ground pivot B,
- A <strong>follower leg</strong> connecting the floating coupler to the foot point.</p>
<p>The mechanism‚Äôs geometry and motion are optimized so that the <strong>foot follows an oval-shaped trajectory</strong>, with a nearly straight line during the stance phase and a smooth lift during the swing phase.</p>
<h4 id="mechanism-drawing">Mechanism Drawing</h4>
<p>Draw or model your mechanism externally (e.g., <strong>Draw.io</strong>).<br>
Include link labels (A‚ÄìF), reference frames, and joint variables (Œ∏‚ÇÅ, Œ∏‚ÇÇ, ‚Ä¶).<br>
<strong>b</strong>=back, <strong>f</strong>=front.  </p>
<p><span class="arithmatex">\(l_1f\)</span>=<span class="arithmatex">\(l_1b\)</span>=<span class="arithmatex">\(l_3f\)</span>=<span class="arithmatex">\(l_3b\)</span>=<span class="arithmatex">\(l_5f\)</span>=<span class="arithmatex">\(l_5b\)</span>=<span class="arithmatex">\(l_65f\)</span>=<span class="arithmatex">\(l_6b\)</span>=<span class="arithmatex">\(l_7f\)</span>=<span class="arithmatex">\(l_7b\)</span>=4.2 inch</p>
<p><span class="arithmatex">\(l_2f\)</span>=<span class="arithmatex">\(l_2b\)</span>=<span class="arithmatex">\(l_4f\)</span>=<span class="arithmatex">\(l_4b\)</span>=<span class="arithmatex">\(l_8f\)</span>=<span class="arithmatex">\(l_8b\)</span>=<span class="arithmatex">\(l_9f\)</span>=<span class="arithmatex">\(l_9b\)</span>=2.1 inch,</p>
<p><span class="arithmatex">\(l_{10}f\)</span>= 1 inch</p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="https://drive.google.com/uc?id=12F3aCq0PZ8hOh6Q8A8LCHXv_I_JCA0OI" data-desc-position="bottom"><img src="https://drive.google.com/uc?id=12F3aCq0PZ8hOh6Q8A8LCHXv_I_JCA0OI" width="800"></a></p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="klann_mechanism4.png" data-desc-position="bottom"><img src="klann_mechanism4.png" width="600"></a></p>
<h3 id="5-force-torque-power-estimation">5 ‚Äî Force / Torque / Power Estimation</h3>
<p>Use the Jacobian to map end-effector forces to actuator torques, then compute power = torque * angular velocity.
Fill in calculated/assumed GRFs and pick key gait states to compute required actuator specs.</p>
<div class="highlight"><pre><span></span><code>!pip install mujoco

# Set up GPU rendering.
from google.colab import files
import distutils.util
import os
import subprocess
if subprocess.run('nvidia-smi').returncode:
  raise RuntimeError(
      'Cannot communicate with GPU. '
      'Make sure you are using a GPU Colab runtime. '
      'Go to the Runtime menu and select Choose runtime type.')

# Add an ICD config so that glvnd can pick up the Nvidia EGL driver.
# This is usually installed as part of an Nvidia driver package, but the Colab
# kernel doesn't install its driver via APT, and as a result the ICD is missing.
# (https://github.com/NVIDIA/libglvnd/blob/master/src/EGL/icd_enumeration.md)
NVIDIA_ICD_CONFIG_PATH = '/usr/share/glvnd/egl_vendor.d/10_nvidia.json'
if not os.path.exists(NVIDIA_ICD_CONFIG_PATH):
  with open(NVIDIA_ICD_CONFIG_PATH, 'w') as f:
    f.write("""{
    "file_format_version" : "1.0.0",
    "ICD" : {
        "library_path" : "libEGL_nvidia.so.0"
    }
}
""")

# Configure MuJoCo to use the EGL rendering backend (requires GPU)
print('Setting environment variable to use GPU rendering:')
%env MUJOCO_GL=egl

# Check if installation was succesful.
try:
  print('Checking that the installation succeeded:')
  import mujoco
  mujoco.MjModel.from_xml_string('&lt;mujoco/&gt;')
except Exception as e:
  raise e from RuntimeError(
      'Something went wrong during installation. Check the shell output above '
      'for more information.\n'
      'If using a hosted Colab runtime, make sure you enable GPU acceleration '
      'by going to the Runtime menu and selecting "Choose runtime type".')

print('Installation successful.')

# Other imports and helper functions
import time
import itertools
import numpy as np

# Graphics and plotting.
print('Installing mediapy:')
!command -v ffmpeg &gt;/dev/null || (apt update &amp;&amp; apt install -y ffmpeg)
!pip install -q mediapy
import mediapy as media
import matplotlib.pyplot as plt

# More legible printing from numpy.
np.set_printoptions(precision=3, suppress=True, linewidth=100)

from IPython.display import clear_output
clear_output()

Step 1: Klann kinematics definition cell

# Compute Jacobian (d foot_pos / d theta_crank) via finite differences
import numpy as np

# Example: placeholder function for foot position of a Klann mechanism
# Replace with your actual linkage geometry

def klann_positions(theta):
    A = np.array([0.0, 0.0])
    r = 0.030
    crank_end = A + r * np.array([np.cos(theta), np.sin(theta)])
    l_coupler = 0.065
    coupler_angle = theta - 0.45
    X = crank_end + l_coupler * np.array([np.cos(coupler_angle), np.sin(coupler_angle)])
    l_main = 0.085
    main_angle = theta + 0.6
    Y = X + l_main * np.array([np.cos(main_angle), np.sin(main_angle)])
    l_follower = 0.055
    follower_angle = main_angle - 0.9
    follower_end = Y + l_follower * np.array([np.cos(follower_angle), np.sin(follower_angle)])
    l_foot = 0.035
    foot_angle = follower_angle - 0.2
    foot = follower_end + l_foot * np.array([np.cos(foot_angle), np.sin(foot_angle)])
    return {
        "A": A,
        "crank_end": crank_end,
        "X": X,
        "Y": Y,
        "follower_end": follower_end,
        "foot": foot
    }

# Numerical derivative
def dfoot_dtheta(theta, h=1e-6):
    p0 = klann_positions(theta)
    f0 = p0["foot"]
    p1 = klann_positions(theta + h)
    f1 = p1["foot"]
    return (f1 - f0) / h

# Test
theta = 0.3
Jtheta = dfoot_dtheta(theta)
print("d(foot)/d(theta) at theta=0.3:", Jtheta)

import mujoco
import numpy as np
import matplotlib
import sympy
print("‚úÖ All core dependencies are available and working!")
</code></pre></div>
<p>Step 2: Computer acutuator torque from foot force per lec and power</p>
<div class="highlight"><pre><span></span><code># Compute actuator torque from foot force (per leg) and power
theta = 0.3
Jt = dfoot_dtheta(theta)
F_foot = np.array([0.0, 3.924])  # N (vertical)
tau = np.dot(Jt, F_foot)
omega = 6.0  # rad/s example
power = tau * omega
print(f"Crank torque required (Nm) at theta={theta:.3f}: {tau:.4f} N¬∑m")
print(f"Mechanical power at crank (W) for omega={omega} rad/s: {power:.4f} W")
</code></pre></div>
<h2 id="6-plots-figures">6 ‚Äî Plots &amp; Figures</h2>
<p>Use matplotlib to create plots (GRF plots, kinematic traces, energy/power curves).</p>
<p>As we try to solve section 6, we created two versions.</p>
<p><strong>Below is version 1 for the whole robot:</strong>
We added the following constranits:</p>
<div class="highlight"><pre><span></span><code>    mjcf.append('  &lt;equality&gt;')
    mjcf.append('    &lt;weld name="weld1" active="true" body1="A" body2="Ap"')
    mjcf.append('           relpose="0 0 0 1 0 0 0" anchor="0 0 0" /&gt;')
    mjcf.append('  &lt;/equality&gt;')
</code></pre></div>
<p>Below is the code: 
</p><div class="highlight"><pre><span></span><code># MJCF generator for Klann hexapod (approximate multi-body representation)
import textwrap, os, numpy as _np
params_local = {
    "l_crank": 0.025,
    "l_coupler1": 0.06,
    "l_coupler2": 0.045,
    "l_follower": 0.09
}
def generate_klann_hexapod_mjcf(params, phase_offsets=None):
    if phase_offsets is None:
        phase_offsets = [0.0, _np.pi, 0.0, _np.pi, 0.0, _np.pi]
    mjcf = []
    mjcf.append('&lt;mujoco model="klann_hexapod"&gt;')
    mjcf.append('  &lt;compiler angle="radian"/&gt;')
    mjcf.append('  &lt;option gravity="0 0 -9.81"/&gt;')
    mjcf.append('  &lt;worldbody&gt;')
    mjcf.append('    &lt;body name="torso" pos="0 0 0.06"&gt;')
    mjcf.append('      &lt;geom name="torso_geom" type="box" size=".09 .07 .03" rgba="0.3 0.6 0.8 1"/&gt;')
    leg_mounts = [ (0.055, 0.06), (0.0, 0.07), (-0.055, 0.06),
                   (0.055, -0.06), (0.0, -0.07), (-0.055, -0.06) ]
    for i,(mx,my) in enumerate(leg_mounts):
        mjcf.append(f'    &lt;body name="leg{i}_mount" pos="{mx} {my} 0.06"&gt;')
        mjcf.append(f'      &lt;joint name="crank{i}" type="hinge" axis="0 0 1" pos="0 0 0"/&gt;')
        mjcf.append('      &lt;body name="crank_link" pos="0 0 0"&gt;')
        mjcf.append(f'        &lt;geom type="capsule" fromto="0 0 0 {params["l_crank"]} 0 0" size="0.006"/&gt;')
        mjcf.append(f'        &lt;body name="coupler1" pos="{params["l_crank"]} 0 0"&gt;')
        mjcf.append('          &lt;joint name="j1" type="hinge" axis="0 0 1" pos="0 0 0"/&gt;')
        mjcf.append(f'          &lt;geom type="capsule" fromto="0 0 0 {params["l_coupler1"]} 0 0" size="0.006"/&gt;')
        mjcf.append(f'          &lt;body name="coupler2" pos="{params["l_coupler1"]} 0 0"&gt;')
        mjcf.append('            &lt;joint name="j2" type="hinge" axis="0 0 1" pos="0 0 0"/&gt;')
        mjcf.append(f'            &lt;geom type="capsule" fromto="0 0 0 {params["l_coupler2"]} 0 0" size="0.006"/&gt;')
        mjcf.append(f'            &lt;body name="follower" pos="{params["l_coupler2"]} 0 0"&gt;')
        mjcf.append('              &lt;joint name="j3" type="hinge" axis="0 0 1" pos="0 0 0"/&gt;')
        mjcf.append(f'              &lt;geom type="capsule" fromto="0 0 0 {params["l_follower"]} 0 0" size="0.008"/&gt;')
        mjcf.append(f'              &lt;site name="foot" pos="{params["l_follower"]} 0 -0.01" size="0.01"/&gt;')
        mjcf.append('            &lt;/body&gt;')
        mjcf.append('          &lt;/body&gt;')
        mjcf.append('        &lt;/body&gt;')
        mjcf.append('      &lt;/body&gt;')
        mjcf.append('    &lt;/body&gt;')
    mjcf.append('    &lt;/body&gt;')
    mjcf.append('  &lt;/worldbody&gt;')
    mjcf.append('  &lt;actuator&gt;')
    for i in range(6):
        mjcf.append(f'    &lt;motor name="crankm{i}" joint="crank{i}" gear="100"/&gt;')
    mjcf.append('  &lt;/actuator&gt;')
    mjcf.append('  &lt;equality&gt;')
    mjcf.append('    &lt;weld name="weld1" active="true" body1="A" body2="Ap"')
    mjcf.append('           relpose="0 0 0 1 0 0 0" anchor="0 0 0" /&gt;')
    mjcf.append('  &lt;/equality&gt;')
    mjcf.append('&lt;/mujoco&gt;')
    return "\n".join(mjcf)

xml = generate_klann_hexapod_mjcf(params_local)
open("klann_hexapod.xml","w").write(xml)
print("MJCF saved to klann_hexapod.xml (length):", len(xml))

# Try loading the MJCF in MuJoCo
try:
    import mujoco
    model = mujoco.MjModel.from_xml_path("klann_hexapod.xml")
    sim = mujoco.MjSim(model)
    print("MuJoCo loaded mjcf. model.nq=", model.nq)
    print("MuJoCo ready. For interactive visualization run: mujoco.viewer.launch(sim)")
except Exception as e:
    print("MuJoCo not available or failed to load in this runtime:", e)
    print("Proceed to fallback plotting in the next cell.")

    # Fallback visualization: plot Klann legs for 6 mounting points (pure Python plotting)
import matplotlib.pyplot as plt
leg_mounts = [ (0.055, 0.06), (0.0, 0.07), (-0.055, 0.06),
               (0.055, -0.06), (0.0, -0.07), (-0.055, -0.06) ]
plt.figure(figsize=(8,8))
torso_x = [-0.09, 0.09, 0.09, -0.09, -0.09]
torso_y = [-0.07, -0.07, 0.07, 0.07, -0.07]
plt.plot(torso_x, torso_y, 'k-')
for i,(mx,my) in enumerate(leg_mounts):
    theta = 0.0 + (np.pi if (i%2)==1 else 0.0)
    pos = klann_positions(theta)
    ptsx = [pos["A"][0]+mx, pos["crank_end"][0]+mx, pos["X"][0]+mx, pos["Y"][0]+mx, pos["follower_end"][0]+mx, pos["foot"][0]+mx]
    ptsy = [pos["A"][1]+my, pos["crank_end"][1]+my, pos["X"][1]+my, pos["Y"][1]+my, pos["follower_end"][1]+my, pos["foot"][1]+my]
    plt.plot([ptsx[0], ptsx[1]], [ptsy[0], ptsy[1]], 'r-')
    plt.plot([ptsx[1], ptsx[2]], [ptsy[1], ptsy[2]], 'g-')
    plt.plot([ptsx[2], ptsx[3]], [ptsy[2], ptsy[3]], 'b-')
    plt.plot([ptsx[3], ptsx[4]], [ptsy[3], ptsy[4]], 'm-')
    plt.plot(ptsx[-1], ptsy[-1], 'ko')
plt.gca().set_aspect('equal', 'box')
plt.title("Hexapod with Klann-style Leg Approx (single phase shown per leg)")
plt.xlabel("x (m)")
plt.ylabel("y (m)")
plt.show()
</code></pre></div><p></p>
<p>Sweep crank angle &amp; compute required crank torque for a given vertical foot force
</p><div class="highlight"><pre><span></span><code>import numpy as np
thetas = np.linspace(0, 2*np.pi, 101)
torques = []
F_foot = np.array([0.0, 3.924])
for th in thetas:
    Jt = dfoot_dtheta(th)
    tau = np.dot(Jt, F_foot)
    torques.append(tau)
torques = np.array(torques)
import matplotlib.pyplot as plt
plt.figure(figsize=(6,3))
plt.plot(thetas, torques)
plt.xlabel("crank angle (rad)")
plt.ylabel("required crank torque (N¬∑m)")
plt.title("Torque vs Crank Angle (per leg)")
plt.grid(True)
plt.show()
print("Torque stats: min {:.4f} Nm, max {:.4f} Nm".format(torques.min(), torques.max()))
</code></pre></div><p></p>
<p><strong>Below is version 2 based on one leg kinematics:</strong></p>
<p>The second version is based on Prof. Aukes' suggestion on working one-leg's kinematics. We do not have xml file for it, and we also ran out of time.
</p><div class="highlight"><pre><span></span><code>import numpy as np, math
import matplotlib.pyplot as plt
from dataclasses import dataclass

R_MB = 1.0    # MB crank
L_BC = 4.2    # long link BC
L_AC = 4.2    # long link AC
L_DE = 2.1    # struts: DE = DF
MD    = 2.1   # |M - D| = 2

INCH_TO_M = 0.0254

# Ground points
M = np.array([0.0, 0.0])
D = np.array([-MD, 0.0])   # D is 2 in to the left of M


def B_of_theta(theta: float) -&gt; np.ndarray:
    """Motor-driven point B on the 1-inch crank around M."""
    return M + R_MB*np.array([np.cos(theta), np.sin(theta)])

@dataclass
class Pose:
    A: np.ndarray
    C: np.ndarray
    B: np.ndarray
    E: np.ndarray
    F: np.ndarray

def residual(u: np.ndarray, theta: float) -&gt; np.ndarray:
    """
    f(u,Œ∏) with u=[Ax,Ay,Cx,Cy]:
      1) |C-B| = L_BC
      2) |C-A| = L_AC
      3) |E-D| = L_DE,  E=(A+C)/2
      4) |F-D| = L_DE,  F=(B+C)/2
    """
    Ax,Ay,Cx,Cy = u
    A = np.array([Ax,Ay])
    C = np.array([Cx,Cy])
    B = B_of_theta(theta)
    E = 0.5*(A + C)
    F = 0.5*(B + C)
    r1 = np.sum((C - B)**2) - L_BC**2
    r2 = np.sum((C - A)**2) - L_AC**2
    r3 = np.sum((E - D)**2) - L_DE**2
    r4 = np.sum((F - D)**2) - L_DE**2
    return np.array([r1,r2,r3,r4], dtype=float)

def Ju_matrix(u: np.ndarray, theta: float) -&gt; np.ndarray:
    """Analytic ‚àÇf/‚àÇu (4x4) for Newton solve."""
    Ax,Ay,Cx,Cy = u
    A = np.array([Ax,Ay]); C = np.array([Cx,Cy]); B = B_of_theta(theta)
    E = 0.5*(A + C)
    F = 0.5*(B + C)

    CB = C - B
    CA = C - A
    ED = E - D
    FD = F - D

    Ju = np.zeros((4,4), dtype=float)
    # f1: |C-B|^2 -&gt; wrt C
    Ju[0,2:4] = 2.0*CB
    # f2: |C-A|^2 -&gt; wrt A and C
    Ju[1,0:2] = -2.0*CA
    Ju[1,2:4] =  2.0*CA
    # f3: |(A+C)/2 - D|^2 -&gt; wrt A and C (both via E)
    Ju[2,0:2] = ED
    Ju[2,2:4] = ED
    # f4: |(B+C)/2 - D|^2 -&gt; wrt C (via F)
    Ju[3,2:4] = FD
    return Ju

def Jtheta_vector(u: np.ndarray, theta: float) -&gt; np.ndarray:
    """Analytic ‚àÇf/‚àÇŒ∏ (4x1). Only f1 and f4 depend on B(Œ∏)."""
    Cx,Cy = u[2], u[3]
    C = np.array([Cx,Cy]); B = B_of_theta(theta)
    dB = R_MB*np.array([-np.sin(theta), np.cos(theta)])  # dB/dŒ∏
    CB = C - B
    F  = 0.5*(B + C)
    Jth = np.zeros((4,1), dtype=float)
    # f1: |C-B|^2 -&gt; -2(C-B)¬∑dB/dŒ∏
    Jth[0,0] = -2.0 * np.dot(CB, dB)
    # f4: 2(F-D)¬∑(‚àÇF/‚àÇŒ∏) = 2(F-D)¬∑(0.5 dB/dŒ∏)
    Jth[3,0] = 2.0 * np.dot(F - D, 0.5*dB)
    return Jth


def solve_pose(theta: float, guess: np.ndarray=None,
               max_iter=60, tol=1e-10) -&gt; Pose:
    B = B_of_theta(theta)
    if guess is None:
        # simple heuristic seed near B
        C0 = B + np.array([-L_BC*0.7,  L_BC*0.3])
        A0 = C0 + np.array([-L_AC*0.6, -L_AC*0.6])
        guess = np.hstack([A0, C0])

    u = guess.astype(float).copy()
    f = residual(u, theta)
    for _ in range(max_iter):
        if np.linalg.norm(f) &lt; tol:
            break
        Ju = Ju_matrix(u, theta)
        # Solve normal equations with tiny damping
        reg = 1e-12*np.eye(4)
        try:
            delta = -np.linalg.solve(Ju.T@Ju + reg, Ju.T@f)
        except np.linalg.LinAlgError:
            delta = -np.linalg.pinv(Ju) @ f
        # backtracking line search
        t = 1.0
        norm0 = np.linalg.norm(f)
        while t &gt; 1e-4:
            u_try = u + t*delta
            f_try = residual(u_try, theta)
            if np.linalg.norm(f_try) &lt; norm0*(1 - 1e-4*t):
                u, f = u_try, f_try
                break
            t *= 0.5
        else:
            u = u + 1e-3*delta
            f = residual(u, theta)

    if np.linalg.norm(f) &gt; 1e-6:
        raise RuntimeError("Solve failed or infeasible at this theta.")

    Ax,Ay,Cx,Cy = u
    A = np.array([Ax,Ay]); C = np.array([Cx,Cy]); B = B_of_theta(theta)
    E = 0.5*(A + C); F = 0.5*(B + C)
    return Pose(A=A, C=C, B=B, E=E, F=F)


def jacobian_A(theta: float, pose: Pose) -&gt; np.ndarray:
    """
    From f(u,Œ∏)=0: du/dŒ∏ = -J_u^{-1} J_Œ∏ -&gt; take first two rows (A_x,A_y).
    Returns (2x1) inches/rad.
    """
    u = np.hstack([pose.A, pose.C])
    Ju = Ju_matrix(u, theta)
    Jth = Jtheta_vector(u, theta)
    du_dtheta = -np.linalg.solve(Ju, Jth)   # (4x1)
    return du_dtheta[0:2,:]                 # dA/dŒ∏

# =========================
# Velocity / Force maps
# =========================
def motor_tau_from_FA(theta: float, F_world_N: np.ndarray, pose: Pose) -&gt; float:
    J = jacobian_A(theta, pose) * INCH_TO_M
    return (J.T @ F_world_N.reshape(2,1)).item()   # N¬∑m

def motor_speed_for_vA(theta: float, vA_mps: np.ndarray, pose: Pose) -&gt; float:
    J = jacobian_A(theta, pose) * INCH_TO_M
    JTJ = (J.T @ J).item()
    if JTJ &lt; 1e-12:
        raise RuntimeError("Near singular configuration for velocity mapping.")
    return (J.T @ vA_mps.reshape(2,1)).item() / JTJ

# =========================
# Quick viz &amp; demo
# =========================
def plot_pose(theta: float, pose: Pose, ax=None, label_once=False):
    if ax is None:
        fig, ax = plt.subplots(figsize=(6,3.8))
    A,C,B,E,F = pose.A,pose.C,pose.B,pose.E,pose.F
    # bars
    ax.plot([M[0], B[0]],[M[1], B[1]], 'C3-', lw=2, label='MB=1' if label_once else None)
    ax.plot([B[0], C[0]],[B[1], C[1]], 'C0-', lw=2, label='BC=4.2' if label_once else None)
    ax.plot([A[0], C[0]],[A[1], C[1]], 'C0-', lw=2, label='AC=4.2' if label_once else None)
    ax.plot([D[0], E[0]],[D[1], E[1]], 'C1-', lw=2, label='DE=2.1' if label_once else None)
    ax.plot([D[0], F[0]],[D[1], F[1]], 'C1-', lw=2, label='DF=2.1' if label_once else None)
    # points
    ax.plot(*M,'ko'); ax.text(*M,' M', va='bottom')
    ax.plot(*D,'ko'); ax.text(*D,' D', va='bottom')
    ax.plot(*B,'x', color='C3'); ax.text(B[0], B[1], ' B', va='bottom', color='C3')
    ax.plot(*C,'x', color='C0'); ax.text(C[0], C[1], ' C', va='bottom', color='C0')
    ax.plot(*A,'x', color='C2'); ax.text(A[0], A[1], ' A', va='bottom', color='C2')
    ax.plot(*E,'o', mfc='none', color='C1'); ax.text(E[0], E[1], ' E', va='bottom', color='C1')
    ax.plot(*F,'o', mfc='none', color='C1'); ax.text(F[0], F[1], ' F', va='bottom', color='C1')
    ax.set_aspect('equal', adjustable='box')
    ax.grid(True, ls=':')
    ax.set_xlabel('x (in)'); ax.set_ylabel('y (in)')
    ax.set_title('Kinematic Model of One Leg')
    return ax

if __name__ == "__main__":
    # sweep theta, solve and warm-start
    TH = np.linspace(-np.pi, np.pi, 540, endpoint=False)
    poses, thetas = [], []
    guess = None
    for th in TH:
        try:
            p = solve_pose(th, guess)
            poses.append(p); thetas.append(th)
            guess = np.hstack([p.A, p.C])   # warm start
        except RuntimeError:
            pass

    # plot a few poses + A locus
    fig, ax = plt.subplots(figsize=(6.4, 3.8))
    if poses:
        idxs = np.linspace(0, len(poses)-1, 4, dtype=int)
        for i, k in enumerate(idxs):
            plot_pose(thetas[k], poses[k], ax=ax, label_once=(i==0))
        A_path = np.array([p.A for p in poses])
        ax.plot(A_path[:,0], A_path[:,1], '0.6', lw=1, label='A locus')
        ax.legend()
    else:
        ax.text(0.5,0.5,"No feasible poses with current geometry.",ha='center',va='center',transform=ax.transAxes)
    plt.tight_layout(); plt.show()

    # report numbers at one feasible pose (if exists)
    if poses:
        k = len(poses)//3
        th, p = thetas[k], poses[k]
        J = jacobian_A(th, p) * INCH_TO_M
        Fg = np.array([0.0, 120.0])  # example GRF
        vA = np.array([0.40, 0.00])  # desired A speed
        tau  = motor_tau_from_FA(th, Fg, p)
        omega = motor_speed_for_vA(th, vA, p)
        print(f"Œ∏={np.rad2deg(th):.1f}¬∞ | A={p.A} in | |J|={np.linalg.norm(J):.3e} m/rad")
        print(f"œÑ={tau:.2f} N¬∑m, œâ={omega:.2f} rad/s, P‚âà{tau*omega:.2f} W")

&lt;img width="391" height="370" alt="image" src="https://github.com/user-attachments/assets/47de986f-4611-497e-94d3-eeb7b416257e" /&gt;
</code></pre></div><p></p>
<h4 id="version-2-explanation">Version 2 Explanation:</h4>
<p><strong>How the figure was generated</strong>
- Mechanism: closed-loop <strong>four-bar</strong> with two midpoint struts (pure kinematics; no mass, stiffness, or gravity).
- Fixed anchors: <span class="arithmatex">\(M=(0,0)\)</span>, <span class="arithmatex">\(D=(-d,0)\)</span> with <span class="arithmatex">\(d=2\,\text{in}\)</span>.
- Link lengths: <span class="arithmatex">\(MB=r=1\,\text{in}\)</span>, <span class="arithmatex">\(AC=BC=L=4.2\,\text{in}\)</span>, <span class="arithmatex">\(DE=DF=s=2.1\,\text{in}\)</span>.
- For each motor angle <span class="arithmatex">\(\theta\)</span>,</p>
<div class="arithmatex">\[
B(\theta)=\big(r\cos\theta,\; r\sin\theta\big).
\]</div>
<ul>
<li>Unknowns <span class="arithmatex">\(x=[A_x,A_y,C_x,C_y]^T\)</span> are solved from the closure system</li>
</ul>
<div class="arithmatex">\[
\begin{aligned}
\|C-B\|^2&amp;=L^2,\qquad \|C-A\|^2=L^2, \\
\left\|\tfrac{A+C}{2}-D\right\|^2&amp;=s^2,\qquad \left\|\tfrac{B+C}{2}-D\right\|^2=s^2,
\end{aligned}
\]</div>
<p>which yields <span class="arithmatex">\(A(\theta),\; C(\theta)\)</span>. Midpoints: <span class="arithmatex">\(E=\tfrac12(A+C)\)</span>, <span class="arithmatex">\(F=\tfrac12(B+C)\)</span>.
Sweeping <span class="arithmatex">\(\theta\)</span> and plotting bodies produces colored poses; the <strong>gray curve</strong> is the locus of <span class="arithmatex">\(A(\theta)\)</span>.</p>
<p><strong>What the figure shows</strong>
- <strong>Red</strong>: crank <span class="arithmatex">\(MB\)</span>; <strong>blue</strong>: long links <span class="arithmatex">\(AC, BC=L\)</span>; <strong>orange</strong>: midpoint struts <span class="arithmatex">\(DE, DF=s\)</span>.
- Labeled points: <span class="arithmatex">\(A,B,C,D,E,F,M\)</span>.
- <strong>Gray path</strong>: foot-point trajectory <span class="arithmatex">\(A(\theta)\)</span> generated by geometric coupling of the four-bar and struts.</p>
<p><strong>Differential/force relations (for analysis and reporting)</strong></p>
<p>Implicit differentiation of <span class="arithmatex">\(F(x,\theta)=0\)</span>:</p>
<div class="arithmatex">\[
\frac{dx}{d\theta} = -\Big(\frac{\partial F}{\partial x}\Big)^{-1}\frac{\partial F}{\partial \theta},
\qquad J_A(\theta)=\frac{dA}{d\theta}\in\mathbb{R}^{2\times 1}.
\]</div>
<p>Velocity, torque, and power mappings:</p>
<div class="arithmatex">\[
\dot A = J_A\,\dot\theta,\qquad
\tau = J_A^{\!\top} F_A,\qquad
P=\tau\,\dot\theta .
\]</div>
<blockquote>
<p><strong>Units:</strong> inches above for geometry; convert to meters when required for computation.</p>
</blockquote>
<p>3) Motor sizing recipe (practical engineering steps + formula)</p>
<p>We compute required motor torque from the foot force via the Jacobian mapping of crank angle to foot position:</p>
<h4 id="motor-torque-calculation-and-sizing">Motor Torque Calculation and Sizing</h4>
<p>The required crank torque is derived from the <strong>virtual work relationship</strong>:</p>
<div class="arithmatex">\[
\tau_{\text{crank}}(\theta) = \mathbf{J}_\theta(\theta)^{\top} \mathbf{F}_{\text{foot}}
\]</div>
<p>where:</p>
<ul>
<li><code>J_theta</code> = partial derivative of foot position (2D vector) with respect to crank angle (a 2√ó1 vector).  </li>
<li><code>F_foot</code> = foot force vector in world frame (e.g., vertical support force).</li>
</ul>
<h4 id="motor-torque-accounting-for-gearbox-and-efficiency">Motor torque accounting for gearbox and efficiency</h4>
<p>If the motor is connected to the crank through a gearbox of ratio <code>G</code> (gear ratio &gt; 1 multiplies torque),<br>
and the overall drivetrain efficiency is <code>Œ∑</code> (0 &lt; Œ∑ ‚â§ 1), with a safety margin <code>M</code> (e.g., 2),<br>
the required <strong>motor stall torque rating</strong> should be:</p>
<div class="arithmatex">\[
\tau_{\text{motor,rated}} = \frac{|\tau_{\text{crank,max}}|}{G \, \eta} \times M
\]</div>
<p>where:</p>
<ul>
<li><code>œÑ_crank,max</code> ‚Äî peak crank torque from sweep over crank angle (computed in Cell 8).  </li>
<li><code>G</code> ‚Äî gearbox ratio (e.g., 10 for 10:1).  </li>
<li><code>Œ∑</code> ‚Äî drivetrain efficiency (e.g., 0.7).  </li>
<li><code>M</code> ‚Äî safety margin (e.g., 2).</li>
</ul>
<h4 id="motor-speed-electrical-power">Motor Speed &amp; Electrical Power</h4>
<p>If peak mechanical power required at the crank is <code>P_mech = œÑ_crank * œâ_crank</code>,<br>
then the required <strong>electrical power</strong> (ignoring motor electrical losses) is roughly:</p>
<div class="arithmatex">\[
P_{elec} \approx \frac{P_{mech}}{\eta}
\]</div>
<p>After gearbox, the motor angular rate is<br>
<code>œâ_motor = G * œâ_crank</code><br>
(because the gearbox reduces speed by <code>G</code> when geared for torque).</p>
<h4 id="worked-numeric-example">Worked Numeric Example</h4>
<ul>
<li>Suppose <code>œÑ_crank,max = 0.35 N¬∑m</code> (from torque sweep).  </li>
<li>Choose <code>G = 10</code>, <code>Œ∑ = 0.7</code>, <code>M = 2</code>.</li>
</ul>
<p>Then the rated motor torque requirement is:</p>
<div class="arithmatex">\[
\tau_{\text{motor,rated}} = \frac{0.35}{10 \times 0.7} \times 2 = 0.10 \, \text{N¬∑m}
\]</div>
<p>and if the crank angular speed is <code>œâ_crank = 6 rad/s</code>, then:</p>
<div class="arithmatex">\[
œâ_{\text{motor}} = G \times œâ_{\text{crank}} = 10 \times 6 = 60 \text{rad/s} \ (\approx 572 RPM)
\]</div>
<p>After gearbox, motor angular rate is œâ_motor = G * œâ_crank (because gearbox reduces speed by G if geared for torque).</p>
<p>Then:</p>
<div class="highlight"><pre><span></span><code>tau_motor_rated = (0.35 / (10 * 0.7)) * 2 = (0.35 / 7) * 2 = 0.05 * 2 = 0.10 N¬∑m
</code></pre></div>
<p>So choose a motor with continuous torque ‚â• 0.10 N¬∑m (plus check stall and peak currents). If motor speed needed: if œâ_crank = 6 rad/s, œâ_motor = 60 rad/s (~572 RPM). Check motor torque-speed curve to ensure it can supply torque at that speed.</p>
<h2 id="7-discussion-points"><strong>7 ‚Äî Discussion Points</strong></h2>
<ol>
<li>Degrees of freedom and number of motors.</li>
<li>How end-effector forces were estimated.</li>
<li>How end-effector speeds were estimated.</li>
</ol>
<h3 id="71-degrees-of-freedom-and-number-of-motors">7.1. Degrees of Freedom and Number of Motors</h3>
<p>The Klann mechanism used in this design is a <strong>planar six-bar linkage</strong> that transforms a single rotary input into an approximately linear foot trajectory. Each leg therefore has <strong>one degree of freedom (DOF)</strong>‚Äîthe input crank rotation. Since the robot uses six legs, the total system has six actuated DOFs, each driven by one motor connected to the crankshaft of its respective leg. The overall body motion is coordinated through synchronized crank phasing (e.g., tripod gait: left-front, right-middle, left-rear in one phase). Passive joints within each linkage do not require additional motors, which simplifies control and reduces weight and cost compared to a multi-DOF leg design.</p>
<h3 id="72-how-end-effector-forces-were-estimated">7.2. How End-Effector Forces Were Estimated</h3>
<p>End-effector (foot) forces were estimated based on <strong>biomechanical scaling and dynamic load distribution</strong> during a tripod gait. Assuming the robot mass is 0.8 kg, the total gravitational load is approximately 7.85 N. During stance, three legs support the robot, so each stance leg bears roughly one-third of that load. To account for dynamic impacts and acceleration during gait, a safety factor of 1.5√ó was applied, giving a peak <strong>ground reaction force (GRF)</strong> of ‚âà 3.9 N per leg. This vertical force was used in the Jacobian relationship <span class="arithmatex">\(\tau = J^T F_{\text{foot}}\)</span> to estimate crank torque. The foot force vector was defined in local leg coordinates as <span class="arithmatex">\( [0, 3.9]^T \)</span> N (purely vertical) for simplicity.</p>
<h3 id="73-how-end-effector-speeds-were-estimated">7.3. How End-Effector Speeds Were Estimated</h3>
<p>Foot speeds were derived from the <strong>Jacobian matrix</strong> of the leg mechanism. By differentiating the foot position vector with respect to crank angle (<span class="arithmatex">\( \mathbf{J}_\theta = \frac{\partial \mathbf{x}_{foot}}{\partial \theta} \)</span>) and multiplying by the crank angular velocity (<span class="arithmatex">\( \dot{\theta} \)</span>), the instantaneous foot velocity was computed:
$$
\mathbf{v}<em>{foot} = \mathbf{J}</em>\theta \, \dot{\theta}
$$
The crank angular velocity was chosen as 6 rad/s, corresponding to a walking speed of approximately 0.3 m/s based on the stride length (0.1 m) and step frequency (‚âà 3 Hz). This kinematic relationship allows prediction of foot motion through the gait cycle and was verified via the MuJoCo simulation, confirming realistic lift and stance trajectories for the desired gait speed.</p>
<h2 id="project-files"><strong>Project Files:</strong></h2>
<ul>
<li>Option 1: Download the .ipynb file </li>
</ul>
<p><a href="RAS557%20Project%20Assignment%201%20%E2%80%94%20Klann-style%20Hexapod_Oct%2015_v2.ipynb">Download Assignment 1 Notebook (.ipynb)</a></p>
<ul>
<li>Option 2: Download the .pdf file</li>
</ul>
<p><a href="RAS557%20Project%20Assignment%201%20%E2%80%94%20Klann-style%20Hexapod_Oct%2015_v2.ipynb.pdf">Download Assignment 1 Report (PDF)</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
        
          
          <a href="Project%20Assignment%202/" class="md-footer__link md-footer__link--next" aria-label="Next: Project Assignment 2">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Project Assignment 2
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright ¬© 2024 team-name-here
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="/2025_fall" target="_blank" rel="noopener" title="2025 Site" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zm96-34c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"></path></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.tabs.sticky", "toc.follow", "navigation.top", "navigation.path", "navigation.indexes", "navigation.prune", "content.action.edit", "navigation.footer"], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.3220b9d7.min.js"></script>
      
        <script src="javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>